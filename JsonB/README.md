https://habr.com/ru/articles/254425/
1. Операторы
\ - обозначает знак | так как он не корректно отображается в таблице

| Оператор                    | Назначение                                                                                                                                                                                            | Пример                                                 |
|-----------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|
| integer → jsonb             | Извлекает n-ый элемент JSON массива                                                                                                                                                                   |                                                        |
| jsonb -> text → jsonb       | Извлекает поле JSON-объекта по заданному ключу                                                                                                                                                        | SELECT * FROM json_test WHERE data -> 'b' > '1';       |
| jsonb ->> integer → text    | Извлекает n-ый элемент из JSON-массива, в виде значения текст                                                                                                                                         | SELECT * FROM json_test WHERE data ->> 'a' > '1';      |
| jsonb #> text[] → jsonb     | Извлекает внутренний JSON-объект по заданному пути                                                                                                                                                    |                                                        |
| jsonb #>> text[] → text     | Извлекает внутренний JSON-объект по заданному пути в виде значения text                                                                                                                               |                                                        |
| jsonb @> jsonb → boolean    | Первое значение JSON содержит второе?                                                                                                                                                                 | SELECT * FROM json_test WHERE data @> '{"a":1}';       |
| jsonb <@ jsonb → boolean    | Первое значение JSON содержится во втором?                                                                                                                                                            | SELECT * FROM json_test WHERE data <@ '{"a":1}';       |
| jsonb ? text → boolean      | Текстовая строка присутствует в значении JSON в качестве ключа верхнего уровня или элемента массива                                                                                                   | SELECT * FROM json_test WHERE data ? 'a';              |
| jsonb ?\ text[] → boolean   | Какие-либо текстовые строки из массива присутствуют в качестве ключей верхнего уровня или элементов массива?                                                                                          | SELECT * FROM json_test WHERE data ?\ array['a', 'b']; |
| jsonb ?& text[] → boolean   | Все текстовые строки из массива присутствуют в качестве ключей ваерхнего уровня или элементов массива?                                                                                                | SELECT * FROM json_test WHERE data ?& array['a', 'b']; |
| jsonb \\ jsonb → jsonb      | Соединяет два значения jsonb. При соединении двух массивов получается массив. При соединении двух объектов получается объект с объединенным набором ключей, при этом приоритетным будет второй объект |                                                        |
| jsonb - text → jsonb        | Удаляет ключ и его значение из объекта или строку массива                                                                                                                                             |                                                        |
| jsonb - text[] → jsonb      | Удаляет из левого операнда все перечисленные ключи или элементы массива                                                                                                                               |                                                        |
| jsonb - text[] → jsonb      | Удаляет из левого операнда все перечисленные ключи или элементы массива                                                                                                                               |                                                        |
| jsonb - integer → jsonb     | Удаляет из массива элемент в заданной позиции. Выдает ошибку если переданное значение не массив                                                                                                       |                                                        |
| jsonb #- text[] → jsonb     | Удаляет поле или элемент массива с заданным путем, в составе которого могут быть индексы массивов и ключи                                                                                             |                                                        |
| jsonb @? jsonpath → boolean | Выдает ли путь JSON какой-либо элемент для заданного JSON                                                                                                                                             |                                                        |
| jsonb @@ jsonpath → boolean | ВОзаращает результата проверки предиката пути JSON для заданного JSON                                                                                                                                 |                                                        |

3. Создадим таблицу с колонкой типа jsonb и добавим пару записей
```
CREATE TABLE json_test (
  id serial primary key,
  data jsonb
);

INSERT INTO json_test (data) VALUES 
  ('{}'),
  ('{"a": 1}'),
  ('{"a": 2, "b": ["c", "d"]}'),
  ('{"a": 1, "b": {"c": "d", "e": true}}'),
  ('{"b": 2}');
```

2. Операции с jsonb
- Равенство
```
SELECT * FROM json_test WHERE data = '{"a":1}';
```

- Ограничения</br>
  Дай нам все объекты начинающиеся с ключа а и значения 1
```
SELECT * FROM json_test WHERE data @> '{"a":1}';
```
В обратную сторону
```
SELECT * FROM json_test WHERE data <@ '{"a":1}';
```

- Существование ключ/элемент</br>
`data ?|` - любые значения</br>
`array['a', 'b']` - ключей a, b
```
SELECT * FROM json_test WHERE data ?| array['a', 'b'];
```
Все значения объектов имеющие точное соотвествие ключей из списка
```
SELECT * FROM json_test WHERE data ?& array['a', 'b'];
```

- Ключи для обхода</br>
`->>` - Выбор по ключ значению</br>
```
SELECT * FROM json_test WHERE data ->> 'a' > '1';
```

Сравнить примитивы объектов и массивов
```
SELECT * FROM json_test WHERE data -> 'b' > '1';
```

Проверить вложенную структуру</br>
Получим объект, где элемент b имеет дочерний объект c, и с равен строке «d»:
```
SELECT * FROM json_test WHERE data #> '{b,c}' = '"d"';
```

Получить строки на основе базовых объектов
```
SELECT * FROM json_test WHERE data @> '{}';
```

Получить строки на основе массивов
```
SELECT * FROM json_test WHERE data @> '[]';
```